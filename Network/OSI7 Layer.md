# OSI 7 계층과 TCP/IP 계층

### 이전 글 복습하기

[네트워크 기초 - IP](https://github.com/im-d-team/Dev-Docs/blob/master/Network/IP.md)
[네트워크 기초 - SubnetMask](https://github.com/im-d-team/Dev-Docs/blob/master/Network/Subnetmask.md)
[네트워크 기초 - Types of IP](https://github.com/im-d-team/Dev-Docs/blob/master/Network/TypesOfIP.md)

- 네트워크 : 두 대 이상의 컴퓨터가 논리적 또는 물리적으로 연결되어 통신이 가능한 상태(PAN, LAN, MAN, WAN).
- IP 주소 : 네트워킹이 가능한 장비를 식별하는 주소.
- IPv4, IPv6
- A, B, C 클래스 : 네트워크 영역과 호스트 영역을 구분한 기준
  - A : `0.0.0.0` ~ `127.255.255.255`
  - B : `128.0.0.0` ~ `191.255.255.255`
  - C : `192.0.0.0` ~ `223.255.255.255`
- 네트워크 주소 : 호스트 부분이 모두 0인 경우
- 브로드캐스트 주소 : 호스트 부분이 모두 1인 경우
- 서브넷마스크 : 네트워크와 호스트 영역을 구분하기 위한 값
- 서브네팅 : 네트워크 관리자가 네트워크 성능을 향상하기 위해, 자원을 효율적으로 분배하는 것
- 공인 IP : 인터넷 사용자의 로컬 네트워크를 식별하기 위해서 ISP에서 제공하는 IP 주소. 즉, 외부에 공개된 IP 주소.
- 사설 IP : 전체 IP 대역 중 특수한 목적으로 사용하는 대역. 아래의 대역이 사설 IP 대역.
  - A : `10.0.0.0` ~ `10.255.255.255`
  - B : `172.16.0.0` ~ `172.31.255.255`
  - C : `192.168.0.0` ~ `192.168.255.255`
- 고정 IP : 고정적으로 부여된 IP로 한번 부여되면 IP를 반납하기 전까지는 다른 장비에 부여할 수 없는 IP 주소
- 동적 IP : 장비에 고정적으로 IP를 부여하지 않고 컴퓨터를 사용할 때 남아 있는 IP 중에서 돌아가면서 부여하는 IP 주소.


## OSI 7계층

OSI는 `Open Systems Interconnection`의 약자로 개방형 시스템이라는 뜻이다. OSI 7계층은 네트워크에서 통신이 일어나는 과정을 7단계로 나눈 것을 말한다.

## OSI 7계층을 나눈 이유는?

이는 서로 이질적인 네트워크 간의 연결에 어려움이 많아 호환성의 결여를 막기 위한 것으로, ISO(국제 표준화 기구)에서는 OSI 참조모델을 제시했다.

**아무리 그래도 왜 이렇게 많은 계층으로 나누어서 우리를 시험에 들게 하나?**

1. 통신이 일어나는 과정을 단계별로 파악할 수 있다.
2. 특정한 곳에 이상이 생긴다면 다른 단계의 장비 또는 소프트웨어를 건들이지 않고 이상이 생긴 단계만 고칠 수 있다.

## 왜 계층이라 했을까?

상하구조를 가지기 때문이다. 예를 들어 5계층이 잘 작동하기 위해서는 1 ~ 4계층이 모두 완벽하게 작동되어야 한다는 것이다.

## 각각의 계층에 대해서

![OSI 7](https://user-images.githubusercontent.com/24274424/86514723-94b77900-be4e-11ea-8456-ad39b27d9ba9.png)

> [출처 - OSI 7 계층이란?, OSI 7 계층을 나눈 이유](https://shlee0882.tistory.com/110)

### 1 계층 - 물리 계층(Physical Layer)

물리 계층은 전기적, 기계적, 기능적인 특성을 이용해서 통신 케이블로 데이터를 전송하게 된다.

물리 계층에서 사용되는 통신 단위는 Bit로 이것은 1과 0으로 나타내며, 즉 전기적으로 On, Off 상태라고 생각하면 된다.

물리 계층에서는 단지 데이터를 전달만 한다. 전송 하려면(또는 받으려면) 데이터가 무엇인지, 어떤 에러가 있는지 등에는 전혀 신경 쓰지 않는다. 정말 단순하게 데이터를 전기적인 신호로 변환해서 주고받는 기능만 할 뿐이다.

결국 물리 계층은 어떤 에러가 있는지 전혀 관여하지 않는다.

- PDU : 비트(Bit)
- 프로토콜 : Modem, Cable, Fiber, RS-232C
- 대표장비 : 허브, 리피터

> 프로토콜 데이터 단위(Protocol Data Unit)는 데이터 통신에서 상위 계층이 전달한 데이터에 붙이는 제어정보를 뜻한다.

### 2 계층 - 링크 계층(Link Layer)

링크 계층은 네트워크 기기들 사이의 데이터 전송을 하는 역할을 한다. 물리 계층을 통해 송수신되는 정보의 오류와 흐름을 관리하여 안전한 정보의 전달을 수행할 수 있도록 도와주는 역할을 한다.

링크 계층에서는 프레임에 주소값을 물리적으로 할당받는데 이는 **맥(MAC; Media Access Control) 주소**라고 불린다.

결국 링크 계층은 **에러검출 / 재전송 / 흐름제어** 역할을 한다.

- PDU : 프레임(Frame)
- 프로토콜 : 이더넷, MAC, PPP, ATM, LAN, Wifi
- 대표장비 : 브릿지, 스위치

### 3 계층 - 네트워크 계층(Network Layer)

**네트워크 계층은 네트워크에서 아주 중요하다.**

중요한 기능 중 하나는 라우팅이라고 한다. 이는 데이터를 목적지까지 안전하고 빠르게 전달하는 기능을 말한다. 경로를 선택하고 주소를 정하고 경로에 따라 패킷을 전달해주는 것이 네트워크 계층의 역할이다.

네트워크 계층에서 사용되는 프로토콜 종류도 다양하고, 라우팅하는 기술도 다양하다. 또한 어느 컴퓨터에게 데이터를 전송할지 주소를 가지고 있어서 통신을 한다. 우리가  아는 IP 주소가 바로 네트워크 계층의 헤더에 있다.

결국 네트워크 계층은 **주소 부여(IP) / 경로 설정(Route)** 역할을 한다.

- PDU : 패킷(Packet)
- 프로토콜 : IP, ICMP 등
- 대표장비 : 라우터, L3 스위치

### 4 계층 - 전송 계층(Transport Layer)

전송 계층은 통신을 할성화하기 위한 계층이다. 양 끝단의 사용자들이 신뢰성있는 데이터를 주고 받게 해주는 역할을 한다.

보통 TCP 프로토콜을 이용하며, 포트를 열어서 응용프로그램이 전송을 할 수 있게 한다.

중요한 것은 데이터 전송을 위해서 Port 번호가 사용된다는 점이다. 대표적인 프로토콜로 TCP와 UDP가 있다. 이 계층에서 사용하는 데이터 단위는 세그먼트이다.

결국 전송 계층은 **패킷 생성(Assembly/Sequencing/Deassembly/Error detection/Request repeat/Flow control) 및 전송** 역할을 한다.

- PDU : 세그먼트(Segment)
- 프로토콜 : TCP, UDP , ARP, RTP
- 대표장비 : 게이트웨이, L4 스위치

### 5 계층 - 세션 계층(Session Layer)

통신 세션을 구성하는 계층으로, 포트(Port)번호를 기반으로 연결한다. 통신장치 간의 상호작용을 설정하고 유지하며 동기화한다. 

> 세션이란 **데이터가 통신하기 위한 논리적인 연결**을 말한다. (통신을 하기 위한 문)

세션 계층은 **TCP/IP 세션을 만들고 없애는 책임**을 진다.

결국 세션 계층은 통신을 하기 위한 세션을 확립 / 유지 / 중단 역할을 한다. (운영체제가 해줌)

- PDU : 데이터(Data)
- 프로토콜 : NetBIOS, SSH, TLS

### 6 계층 - 표현 계층(Presentation Layer)

표현 계층(Presentation layer)은 코드 간의 번역을 담당하여 사용자 시스템에서 데이터의 형식상 차이를 다루는 부담을 응용 계층으로부터 덜어 준다. MIME 인코딩이나 암호화 등의 동작이 표현 계층에서 이루어지는 것이다.

예를 들면, EBCDIC로 인코딩된 문서 파일을 ASCII로 인코딩된 파일로 바꿔 주는 것, 해당 데이터가 TEXT인지, 그림인지, GIF인지 JPG인지의 구분 등이 표현 계층의 몫이다.

결국 표현 계층은 사용자의 명령어를 완성 및 결과 표현하며, 압축 / 암호화 역할을 한다.

- PDU : 데이터(Data)
- 프로토콜 : JPG, MPEG, SMB, AFP

### 7 계층 - 응용 계층(Application Layer)

응용 계층은 사용자와 바로 연결되어 있으며 응용 SW를 도와주는 계층이다. 사용자로부터 정보를 입력받아 하위 계층으로 전달하고 하위 계층에서 전송한 데이터를 사용자에게 전달한다.

파일 전송, DB, 메일 전송 등 여러가지 응용 서비스를 네트워크에 연결해주는 역할을 한다.

결국 응용 계층은 응용 프로세스와 직접 관계하여 일반적인 **응용 서비스를 수행**한다.

- PDU : 데이터(Data)
- 프로토콜 : DHCP, DNS, FTP, HTTP

## TCP/IP 4계층

네트워크 전송 시 데이터 표준을 정리한 것이 ISO 7계층이라고 한다면, 이 이론을 실제 사용하는 인터넷 표준이 TCP/IP 4계층이라고 생각하면 된다.

TCP/IP는 인터넷 프로토콜 중 가장 중요한 역할을 하는 TCP와 IP의 합성어로 데이터의 흐름 관리, 정확성 확인, 패킷의 목적지 보장을 담당한다. 데이터의 정확성 확인은 TCP가, 패킷을 목적지까지 전송하는 일은 IP가 담당한다.

이로써 우리는 7계층이라는 것에서 조금은 벗어나게 된다.

![TCP IP](https://user-images.githubusercontent.com/24274424/86516133-1f04da80-be59-11ea-800f-0626926fb29c.png)

> [출처 - "데이터가 전달되는 원리" OSI 7계층 모델과 TCP/IP 모델](https://velog.io/@hidaehyunlee/%EB%8D%B0%EC%9D%B4%ED%84%B0%EA%B0%80-%EC%A0%84%EB%8B%AC%EB%90%98%EB%8A%94-%EC%9B%90%EB%A6%AC-OSI-7%EA%B3%84%EC%B8%B5-%EB%AA%A8%EB%8D%B8%EA%B3%BC-TCPIP-%EB%AA%A8%EB%8D%B8)

### 1 계층 - 네트워크 액세스 계층(Network Access Layer or Network Interface Layer)

OSI 7계층의 물리 계층과 데이터 링크 계층에 해당한다.

### 2 계층 - 인터넷 계층(Internet Layer)

OSI 7계층의 네트워크 계층에 해당한다. 

### 3 계층 - 전송 계층(Transport Layer)

OSI 7계층의 전송 계층에 해당한다.
 
### 4 계층 - 응용 계층(Application Layer)

OSI 7계층의 세션 계층, 표현 계층, 응용 계층에 해당한다.

#### Reference

- [https://reakwon.tistory.com/59](https://reakwon.tistory.com/59)
- [TCP/IP 4계층](https://tar-cvzf-studybackup-tar-gz.tistory.com/38)
- [TCP/IP 4계층(TCP/IP 4 Layer)](https://hahahoho5915.tistory.com/15)
- [[OSI 7계층, TCP/IP 4계층] 네트워크의 기본 계층 구조](https://ryusae.tistory.com/4)
- ["데이터가 전달되는 원리" OSI 7계층 모델과 TCP/IP 모델](https://velog.io/@hidaehyunlee/%EB%8D%B0%EC%9D%B4%ED%84%B0%EA%B0%80-%EC%A0%84%EB%8B%AC%EB%90%98%EB%8A%94-%EC%9B%90%EB%A6%AC-OSI-7%EA%B3%84%EC%B8%B5-%EB%AA%A8%EB%8D%B8%EA%B3%BC-TCPIP-%EB%AA%A8%EB%8D%B8)
